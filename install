#!/usr/bin/env zsh

if [ ! -d ~/.oh-my-zsh ]; then
  curl -L https://github.com/robbyrussell/oh-my-zsh/raw/master/tools/install.sh | sh
fi

cd `dirname $0`
DOTFILES=$(pwd)

echo "export DOTFILES=${DOTFILES}" > ~/.dotfiles
cat ~/.zshrc | grep "\.dotfiles" || echo ". ${HOME}/.dotfiles" > ~/.zshrc
cat ~/.zshrc | grep "DOTFILES/zshrc" || echo 'source $DOTFILES/zshrc' >> ~/.zshrc
[ $USER = key ] && cat ~/.zshrc | grep 'DOTFILES/zshrc.key' || echo 'source $DOTFILES/zshrc.key' >> ~/.zshrc
cat ~/.gitconfig | grep include || echo "[include]\n\tpath = ${DOTFILES}/gitconfig" >> ~/.gitconfig
[ -f ~/.gitignore ] || cp $DOTFILES/gitignore ~/.gitignore
mkdir -p ~/.bin

source ~/.zshrc

[ -L ~/.config/nvim ] || ln -s ${DOTFILES}/lazyvim ~/.config/nvim
